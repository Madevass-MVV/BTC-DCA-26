<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BTC DCA Command Center</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚Çø</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Outfit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
:root{--bg:#060810;--bg2:#0c0e18;--bg3:#111422;--bg4:#161a2a;--border:#1a1e30;--border2:#252a40;--text:#dfe2ee;--dim:#8a90b0;--muted:#505878;--faint:#2e3350;--green:#00dc82;--gs:rgba(0,220,130,.15);--gm:rgba(0,220,130,.30);--red:#f84060;--rs:rgba(248,64,96,.15);--rm:rgba(248,64,96,.30);--gold:#f0c840;--yy:rgba(240,200,64,.12);--ym:rgba(240,200,64,.28);--blue:#40b8f0;--bs:rgba(64,184,240,.12);--cyan:#18ffff;--cs:rgba(24,255,255,.12);--purple:#a07cf8;--ps:rgba(160,124,248,.12);--orange:#ff9100;--os:rgba(255,145,0,.12);--mono:'JetBrains Mono',monospace;--body:'Outfit',sans-serif;--r:12px;--rr:8px}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}html{scroll-behavior:smooth}body{font-family:var(--body);background:var(--bg);color:var(--text);min-height:100vh;-webkit-font-smoothing:antialiased}::-webkit-scrollbar{width:5px;height:5px}::-webkit-scrollbar-track{background:var(--bg)}::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{-webkit-appearance:none}input[type=number]{-moz-appearance:textfield}
.atmos{position:fixed;inset:0;pointer-events:none;z-index:0;background:radial-gradient(ellipse 800px 350px at 50% -80px,rgba(240,200,64,.04),transparent),radial-gradient(ellipse 500px 250px at 90% 100%,rgba(248,64,96,.018),transparent)}
.sbar{position:sticky;top:0;z-index:100;background:rgba(6,8,16,.92);backdrop-filter:blur(16px);border-bottom:1px solid var(--border);padding:10px 20px;display:flex;align-items:center;gap:16px;flex-wrap:wrap}.sbar-logo{font:700 14px var(--body);letter-spacing:-.5px;white-space:nowrap}.sbar-logo b{color:var(--gold)}.sbar-s{display:flex;align-items:center;gap:5px;font-size:11px}.sbar-l{font:500 8.5px var(--mono);color:var(--muted);letter-spacing:1.2px;text-transform:uppercase}.sbar-v{font:600 13px var(--mono)}.sbar-sep{width:1px;height:22px;background:var(--border);flex-shrink:0}.sbar .green{color:var(--green)}.sbar .red{color:var(--red)}.sbar .gold{color:var(--gold)}.sbar .cyan{color:var(--cyan)}
.live-dot{width:7px;height:7px;border-radius:50%;background:var(--green);animation:blink 2s ease-in-out infinite;flex-shrink:0}@keyframes blink{0%,100%{opacity:1}50%{opacity:.3}}
.shell{position:relative;z-index:1;max-width:1200px;margin:0 auto;padding:24px 20px 60px}
.hero{text-align:center;padding:28px 0 16px}.hero-badge{display:inline-flex;align-items:center;gap:7px;background:var(--bg3);border:1px solid var(--border);border-radius:100px;padding:5px 16px;font:500 9.5px var(--mono);letter-spacing:1.8px;text-transform:uppercase;color:var(--cyan);margin-bottom:14px}.hero h1{font:900 clamp(24px,4.5vw,42px)/1.1 var(--body);letter-spacing:-1.5px;background:linear-gradient(135deg,#fff 30%,var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:8px}.hero .sub{color:var(--dim);font-size:13.5px;max-width:600px;margin:0 auto;line-height:1.6}
.price-live{display:flex;align-items:center;justify-content:center;gap:8px;margin:8px 0 4px}.price-live .val{font:700 clamp(18px,3vw,26px) var(--mono);color:var(--gold)}.price-live .chg{font:600 11px var(--mono);padding:3px 8px;border-radius:5px}.price-live .chg.up{background:var(--gs);color:var(--green)}.price-live .chg.dn{background:var(--rs);color:var(--red)}.price-status{text-align:center;font:400 9px var(--mono);color:var(--muted);margin-bottom:14px}
.tabs{display:flex;justify-content:center;gap:5px;margin:16px 0 20px;flex-wrap:wrap}.tab-btn{background:none;border:1px solid transparent;color:var(--muted);border-radius:10px;padding:8px 15px;cursor:pointer;font:500 10px var(--mono);letter-spacing:1px;text-transform:uppercase;display:flex;align-items:center;gap:6px;transition:all .2s;white-space:nowrap}.tab-btn:hover{color:var(--dim);border-color:var(--border)}.tab-btn.on{background:var(--yy);border-color:var(--ym);color:var(--gold)}.tab-btn .ico{font-size:12px}.tab-page{display:none}.tab-page.on{display:block;animation:fadeUp .3s ease}@keyframes fadeUp{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(165px,1fr));gap:10px;margin-bottom:20px}.stat{background:var(--bg2);border:1px solid var(--border);border-radius:var(--r);padding:14px 16px;position:relative;overflow:hidden;transition:border-color .2s}.stat:hover{border-color:var(--border2)}.stat::after{content:'';position:absolute;top:0;left:0;right:0;height:2px}.stat.sg::after{background:linear-gradient(90deg,transparent,var(--green),transparent)}.stat.sr::after{background:linear-gradient(90deg,transparent,var(--red),transparent)}.stat.sy::after{background:linear-gradient(90deg,transparent,var(--gold),transparent)}.stat.sb::after{background:linear-gradient(90deg,transparent,var(--blue),transparent)}.stat.sc::after{background:linear-gradient(90deg,transparent,var(--cyan),transparent)}.stat-lbl{font:500 8.5px var(--mono);color:var(--muted);letter-spacing:1.4px;text-transform:uppercase;margin-bottom:5px}.stat-val{font:700 19px var(--body);letter-spacing:-.4px}.stat-sub{font:400 10px var(--mono);color:var(--dim);margin-top:3px}
.card{background:var(--bg2);border:1px solid var(--border);border-radius:14px;padding:20px;margin-bottom:14px;transition:border-color .2s}.card:hover{border-color:var(--border2)}.card-t{font:600 11px var(--body);text-transform:uppercase;letter-spacing:1.4px;color:var(--dim);display:flex;align-items:center;gap:8px;margin-bottom:14px}.card-t::before{content:'';width:3px;height:13px;border-radius:2px;background:var(--gold)}
.g2{display:grid;grid-template-columns:1fr 320px;gap:14px}@media(max-width:900px){.g2{grid-template-columns:1fr}}
.acard{background:var(--bg2);border:1px solid var(--border);border-radius:14px;padding:20px 24px;margin-bottom:11px;transition:border-color .2s}.acard:hover{border-color:var(--border2)}.acard h3{font:600 12px var(--mono);letter-spacing:.3px;margin-bottom:9px;display:flex;align-items:center;gap:7px;flex-wrap:wrap}.acard p{color:var(--dim);font-size:12.5px;line-height:1.85}.acard p strong{color:var(--text)}.hl{font:500 11px var(--mono)}.hl.g{color:var(--green)}.hl.r{color:var(--red)}.hl.y{color:var(--gold)}.hl.c{color:var(--cyan)}.hl.p{color:var(--purple)}.hl.o{color:var(--orange)}.hl.b{color:var(--blue)}
.badge{display:inline-flex;align-items:center;gap:4px;padding:3px 8px;border-radius:5px;font:500 8.5px var(--mono);letter-spacing:.5px;text-transform:uppercase}.badge-hi{background:var(--gs);color:var(--green);border:1px solid var(--gm)}.badge-md{background:var(--yy);color:var(--gold);border:1px solid var(--ym)}.badge-lo{background:var(--os);color:var(--orange);border:1px solid rgba(255,145,0,.25)}
.etbl{width:100%;border-collapse:separate;border-spacing:0 4px}.etbl thead th{font:500 8px var(--mono);letter-spacing:1.5px;text-transform:uppercase;color:var(--muted);text-align:left;padding:5px 8px}.etbl tbody tr{background:var(--bg2);transition:all .2s}.etbl tbody tr:hover{background:var(--bg3)}.etbl tbody tr.filled{background:rgba(0,220,130,.06);outline:1px solid rgba(0,220,130,.15)}.etbl td{padding:11px 8px;font-size:12px;vertical-align:middle}.etbl td:first-child{border-radius:8px 0 0 8px}.etbl td:last-child{border-radius:0 8px 8px 0}
.ck-btn{width:26px;height:26px;border-radius:7px;border:2px solid var(--border2);background:transparent;color:var(--muted);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:13px;transition:all .2s}.ck-btn.on{border-color:var(--green);background:var(--gs);color:var(--green)}.ck-btn:hover{border-color:var(--green)}
.pnl-panel{background:var(--bg2);border:1px solid var(--border);border-radius:14px;padding:20px}.price-row{display:flex;align-items:center;gap:14px;flex-wrap:wrap;margin-bottom:14px}.price-row label{font:500 9px var(--mono);color:var(--muted);letter-spacing:1px;text-transform:uppercase}.sim-input{background:var(--bg3);border:1px solid var(--border);border-radius:var(--rr);padding:8px 12px;color:var(--cyan);font:600 16px var(--mono);width:140px;outline:none;transition:border-color .2s}.sim-input:focus{border-color:rgba(24,255,255,.3)}.sim-slider{-webkit-appearance:none;appearance:none;width:100%;height:6px;border-radius:3px;background:var(--bg4);outline:none;flex:1;min-width:160px}.sim-slider::-webkit-slider-thumb{-webkit-appearance:none;width:18px;height:18px;border-radius:50%;background:var(--cyan);cursor:pointer;border:2px solid var(--bg)}.sim-slider::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:var(--cyan);cursor:pointer;border:2px solid var(--bg)}.sl-labels{display:flex;justify-content:space-between;font:400 8px var(--mono);color:var(--muted);margin-top:3px}
.pnl-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(130px,1fr));gap:7px;margin-top:12px}.pnl-m{background:var(--bg3);border-radius:var(--rr);padding:12px 14px;border:1px solid var(--border)}.pnl-m .l{font:500 7.5px var(--mono);color:var(--muted);letter-spacing:1px;text-transform:uppercase;margin-bottom:3px}.pnl-m .v{font:700 16px var(--mono)}
.sc-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:11px;margin-bottom:16px}.sc{background:var(--bg2);border:1px solid var(--border);border-radius:14px;padding:20px}.sc.best{border-color:rgba(0,220,130,.2);background:linear-gradient(180deg,rgba(0,220,130,.04),var(--bg2))}.sc.mid{border-color:rgba(240,200,64,.2);background:linear-gradient(180deg,rgba(240,200,64,.04),var(--bg2))}.sc.worst{border-color:rgba(248,64,96,.2);background:linear-gradient(180deg,rgba(248,64,96,.04),var(--bg2))}.sc-tag{font:600 9px var(--mono);letter-spacing:1.2px;text-transform:uppercase;margin-bottom:8px}.sc h4{font-size:14px;margin-bottom:5px}.sc .val{font:700 20px var(--mono);margin-bottom:4px}.sc .det{font-size:11.5px;color:var(--dim);line-height:1.7}
.note{padding:10px 13px;border-radius:var(--rr);background:rgba(255,255,255,.012);border-left:3px solid var(--gold);font-size:11.5px;line-height:1.65;color:var(--dim);margin-bottom:7px}.note strong{color:var(--text)}
.casc{display:flex;align-items:stretch;margin-bottom:3px;border-radius:8px;overflow:hidden;min-height:52px;transition:transform .15s}.casc:hover{transform:translateX(3px)}.casc-p{width:95px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font:600 11px var(--mono);background:var(--bg3);border-right:2px solid var(--border)}.casc-b{flex:1;position:relative;display:flex;align-items:center;padding:9px 11px;background:var(--bg2)}.casc-bar{position:absolute;left:0;top:0;bottom:0;opacity:.18;border-radius:0 6px 6px 0}.casc-info{position:relative;z-index:2;font-size:10.5px;line-height:1.5;flex:1}.casc-info .t{font-weight:600;font-size:11px;margin-bottom:2px}.casc-info .d{color:var(--dim);font-size:10px}.casc-st{position:relative;z-index:2;margin-left:auto;padding-left:8px;flex-shrink:0}
.kz{display:flex;justify-content:space-between;align-items:center;padding:8px 11px;border-radius:var(--rr);background:rgba(255,255,255,.015);border:1px solid rgba(255,255,255,.035);margin-bottom:5px}.kz-p{font:600 12px var(--mono)}.kz-l{font-size:9.5px;color:var(--dim)}
.src{display:block;font-size:10px;color:var(--blue);text-decoration:none;margin-bottom:4px;opacity:.65;transition:opacity .2s}.src:hover{opacity:1}
.tp-row{display:flex;align-items:center;gap:9px;background:var(--bg2);border:1px solid var(--border);border-radius:10px;padding:12px 14px;margin-bottom:6px;flex-wrap:wrap}.tp-num{font:600 10px var(--mono);color:var(--gold);width:26px}.tp-price{font:600 13px var(--mono);color:var(--green);width:80px}.tp-pct{font:600 10px var(--mono);color:var(--gold);background:var(--yy);padding:3px 7px;border-radius:5px}.tp-bar-w{flex:1;height:5px;background:var(--bg4);border-radius:3px;overflow:hidden;min-width:60px}.tp-bar-f{height:100%;border-radius:3px;background:linear-gradient(90deg,var(--green),var(--gold))}.tp-gain{font:600 11px var(--mono);color:var(--green);min-width:90px}.tp-reason{font-size:10px;color:var(--dim);flex:1;min-width:100px}
.sl-card{background:linear-gradient(135deg,rgba(248,64,96,.05),var(--bg2) 40%);border:1px solid var(--rm);border-radius:14px;padding:22px 26px}.sl-price{font:700 32px var(--mono);color:var(--red)}.sl-metrics{display:flex;gap:20px;flex-wrap:wrap;margin-top:12px}.sl-m .v{font:700 17px var(--mono)}.sl-m .l{font:500 8px var(--mono);color:var(--muted);letter-spacing:1px;text-transform:uppercase;margin-top:2px}
.stabs{display:flex;gap:4px;margin-bottom:10px;flex-wrap:wrap}.stab{padding:6px 13px;border-radius:7px;border:1px solid var(--border);background:var(--bg2);color:var(--dim);font:500 10px var(--mono);cursor:pointer;transition:all .2s}.stab.on{background:var(--bg4);color:var(--cyan);border-color:rgba(24,255,255,.2)}.stab:hover{border-color:var(--border2)}.stab-c{display:none}.stab-c.on{display:block}
.ladder-wrap{position:relative;min-height:700px}.lad-item{position:absolute;left:0;right:0;display:flex;align-items:center;height:24px;transition:all .3s}.lad-p{width:65px;text-align:right;padding-right:8px;font:600 10.5px var(--mono);flex-shrink:0}.lad-dot{width:11px;height:11px;border-radius:50%;border:2px solid;flex-shrink:0;position:relative;z-index:2;background:var(--bg)}.lad-dot.entry{border-color:var(--green)}.lad-dot.tp{border-color:var(--gold)}.lad-dot.sl{border-color:var(--red)}.lad-dot.liq{border-color:var(--orange)}.lad-dot.current{border-color:var(--cyan);background:var(--cyan);box-shadow:0 0 8px var(--cs)}.lad-dot.mstr{border-color:var(--purple)}.lad-dot.filled{background:var(--green)!important}.lad-line{height:2px;flex:1;margin:0 6px;opacity:.4}.lad-tag{font:500 8.5px var(--mono);letter-spacing:.5px;text-transform:uppercase;padding:2px 7px;border-radius:4px;white-space:nowrap}.lad-note{font-size:9px;color:var(--muted);margin-left:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:220px}
.hbar{display:flex;flex-direction:column;gap:4px}.hbar-r{display:flex;align-items:center;gap:6px}.hbar-l{width:80px;font:400 9.5px var(--mono);text-align:right;flex-shrink:0;color:var(--dim)}.hbar-t{flex:1;height:20px;background:var(--bg3);border-radius:5px;position:relative;overflow:hidden}.hbar-f{height:100%;border-radius:5px;display:flex;align-items:center;padding-left:6px;font:600 8.5px var(--mono);color:var(--bg);transition:width .5s ease}.hbar-ty{font:500 8.5px var(--mono);width:38px;flex-shrink:0}
.candle-wrap{position:relative;width:100%;height:500px;overflow:hidden}canvas#candleChart{width:100%;height:100%;display:block}
.disc{text-align:center;margin-top:36px;padding:16px;background:var(--bg2);border:1px solid var(--border);border-radius:10px;font:400 10px var(--mono);color:var(--muted);line-height:1.8}
.toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%);background:var(--bg3);border:1px solid var(--ym);color:var(--gold);border-radius:10px;padding:10px 22px;font:500 12px var(--body);z-index:999;opacity:0;pointer-events:none;transition:opacity .3s}.toast.show{opacity:1}
@media(max-width:700px){.sbar{gap:8px;padding:8px 12px}.sbar-v{font-size:11px}.tabs{gap:3px}.tab-btn{padding:7px 10px;font-size:9px}.casc-p{width:75px;font-size:10px}}
@media(max-width:500px){.tp-reason{display:none}.g2{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="atmos"></div>
<div class="sbar"><div class="sbar-logo">BTC <b>DCA</b></div><div class="sbar-sep"></div><div class="sbar-s"><div class="live-dot" id="liveDot"></div><span class="sbar-l">BTC</span><span class="sbar-v gold" id="sh_price">‚Äî</span></div><div class="sbar-s"><span class="sbar-l">Deployed</span><span class="sbar-v gold" id="sh_dep">$0</span></div><div class="sbar-s"><span class="sbar-l">Remaining</span><span class="sbar-v cyan" id="sh_rem">$7,000</span></div><div class="sbar-s"><span class="sbar-l">Avg Entry</span><span class="sbar-v" id="sh_avg">‚Äî</span></div><div class="sbar-s"><span class="sbar-l">P&L</span><span class="sbar-v" id="sh_pnl">‚Äî</span></div></div>
<div class="shell">
<div class="hero"><div class="hero-badge"><span class="live-dot"></span> Weekly Timeframe ¬∑ DCA Position ¬∑ $7,000</div><h1>BTC Long Position<br>Command Center</h1><div class="sub">Multi-entry DCA framework targeting key Fibonacci retracements, liquidation clusters, and structural support ‚Äî with live price tracking and P&L monitoring.</div></div>
<div class="price-live"><span class="val" id="livePrice">Loading...</span><span class="chg" id="liveChg"></span></div>
<div class="price-status" id="priceStatus">Connecting to CoinGecko...</div>
<div class="tabs"><button class="tab-btn on" data-tab="overview"><span class="ico">‚óà</span> Overview</button><button class="tab-btn" data-tab="analysis"><span class="ico">üìä</span> Analysis</button><button class="tab-btn" data-tab="pricemap"><span class="ico">üìà</span> Price Map</button><button class="tab-btn" data-tab="liquidation"><span class="ico">üî•</span> Liquidations</button><button class="tab-btn" data-tab="exits"><span class="ico">üí∞</span> Exits & Risk</button></div>

<!-- TAB 1: OVERVIEW -->
<div class="tab-page on" id="page-overview">
<div class="stats" id="overviewStats"></div>
<div class="card"><div class="card-t">Entry Levels & Allocation</div><div style="font-size:11.5px;color:var(--dim);margin-bottom:12px">Click checkboxes to mark entries as <strong style="color:var(--green)">FILLED</strong>. P&L updates automatically.</div><div style="overflow-x:auto"><table class="etbl" id="entryTable"><thead><tr><th>Fill</th><th>Entry</th><th>Price</th><th>Alloc</th><th>Amount</th><th>BTC</th><th>Rationale</th><th>Conf</th></tr></thead><tbody></tbody></table></div></div>
<div class="card"><div class="card-t">Weighted Average by Scenario</div><div class="sc-grid" id="scenarios"></div></div>
<div class="card"><div class="card-t">P&L Simulator</div><div class="pnl-panel"><div class="price-row"><div><label>Simulated Price</label><br><input type="text" class="sim-input" id="simInput" value=""></div><div style="flex:1;min-width:160px"><label>Range</label><br><input type="range" class="sim-slider" id="simSlider" min="25000" max="180000" value="66000" step="100"><div class="sl-labels"><span>$25K</span><span>$60K</span><span>$100K</span><span>$126K</span><span>$180K</span></div></div></div><div class="pnl-grid" id="pnlGrid"></div></div></div>
<div class="card"><div class="card-t">Market Context</div><div class="note"><strong>Short squeeze above:</strong> $6.5B in short positions at risk near $92K. Bright bands building from shorts who entered during crash. A squeeze would be violent.</div><div class="note"><strong>Long cascade below:</strong> $60K liquidity already swept Feb 6 ‚Äî retest would slice through faster toward $55K‚Äì$58K untouched cluster (golden pocket).</div><div class="note"><strong>MSTR anchor:</strong> Strategy Inc. holds 714,644 BTC at avg $66,384. Price sitting on their cost basis ‚Äî massive sentiment magnet.</div><div class="note"><strong>Weekly RSI:</strong> Below 30 ‚Äî only happened 3 times in BTC history. Every instance marked a generational bottom. Positive divergence forming.</div></div>
</div>

<!-- TAB 2: ANALYSIS -->
<div class="tab-page" id="page-analysis">
<div class="acard"><h3><span style="color:var(--purple)">‚ë†</span> Fibonacci Retracement <span class="badge badge-hi">HIGH</span></h3><p>Full cycle: <strong>$15,476 ‚Üí $126,272</strong> ($110,796 range). Key levels: <span class="hl p">0.382=$83,948</span> (broken) ¬∑ <span class="hl p">0.500=$70,874</span> (broken) ¬∑ <span class="hl p">0.618=$57,820</span> (golden pocket ‚Äî untouched, critical) ¬∑ <span class="hl p">0.786=$39,207</span> (extreme). Price between 0.5 and 0.618. Golden pocket at ~$57.8K is the single highest-confluence level.</p></div>
<div class="acard"><h3><span style="color:var(--cyan)">‚ë°</span> Weekly EMA Structure <span class="badge badge-hi">HIGH</span></h3><p><span class="hl c">20 EMA=$90,145</span> ¬∑ <span class="hl c">50 EMA=$94,151</span> ¬∑ <span class="hl c">100 EMA=$85,332</span> ¬∑ <span class="hl c">200 EMA=$68,125</span>. Price cracked below the <strong>200W EMA</strong> ‚Äî first time since early 2023. Historically, dipping below then reclaiming the 200W EMA = generational buying opportunity. ~$68K is now resistance.</p></div>
<div class="acard"><h3><span style="color:var(--gold)">‚ë¢</span> Liquidation Heatmap <span class="badge badge-hi">HIGH</span></h3><p><strong>CoinGlass (Binance BTC/USDT, Feb 11 2026)</strong><br><br><strong>Swept:</strong> <span class="hl r">$95K‚Üí$68K</span> ‚Äî consumed Jan 13‚ÄìFeb 6. Yellow glow at <span class="hl r">$65K‚Äì$60K</span> = Feb 6 flash crash ($2.6B liq).<br><br><strong>Untouched below:</strong> <span class="hl o">$58K‚Äì$55K</span> ‚Äî visible cyan/green band, NOT touched. Next magnet if $60K breaks. <span class="hl o">$50K‚Äì$45K</span> ‚Äî lighter teal, less dense. Below $42K = dark/empty.<br><br><strong>Above:</strong> <span class="hl g">$75K‚Äì$82K</span> ‚Äî bright bands from shorts. <strong>$6.5B short positions</strong> at risk near $92K.<br><br><strong>Key insight:</strong> $60K already swept ‚Äî retest slices through faster toward $55K‚Äì$58K untouched cluster.</p></div>
<div class="acard"><h3><span style="color:var(--orange)">‚ë£</span> MSTR as Market Anchor <span class="badge badge-hi">HIGH</span></h3><p>Strategy Inc: <strong>714,644 BTC at avg $66,384</strong> ‚Äî price sitting on their cost basis. Not a forced liquidation trigger (notes mature 2027+), but a <strong>narrative floor</strong>. Break below $60K ‚Üí "going concern" warnings. The <span class="hl p">$66,384</span> level is a sentiment magnet in both directions.</p></div>
<div class="acard"><h3><span style="color:var(--green)">‚ë§</span> Weekly RSI Precedent <span class="badge badge-hi">HIGH</span></h3><p>RSI <strong>below 30</strong> ‚Äî only occurred <strong>3 times</strong> in BTC history: $18K (‚Üí$125K), $3K (‚Üí$70K), $150 (‚Üí$20K). Every instance = generational bottom. Positive divergence forming. $10B realized losses last week ‚Äî second-highest ever, typically late-stage selloff (Compass Point).</p></div>
<div class="acard"><h3><span style="color:var(--blue)">‚ë•</span> Macro ‚Äî Feb 2026 <span class="badge badge-md">MEDIUM</span></h3><p>Fed at <strong>3.50‚Äì3.75%</strong>, no cuts before June. ETF outflows <strong>$6.2B</strong> since Nov 2025; avg ETF cost ~$81,600 (underwater). Compass Point: <em>"early stages of bottoming."</em> 40% probability: consolidation $60K‚Äì$90K for months. Bessent rejected gov't BTC purchases Feb 4 ‚Äî accelerated selloff. Polymarket: highest prob BTC ends Feb ‚â§$65K.</p></div>
</div>

<!-- TAB 3: PRICE MAP -->
<div class="tab-page" id="page-pricemap">
<div class="stabs"><button class="stab on" onclick="switchSub('ladder')">Vertical Ladder</button><button class="stab" onclick="switchSub('hbar')">Horizontal Bars</button><button class="stab" onclick="switchSub('candle')">Candlestick</button></div>
<div class="stab-c on" id="sub-ladder"><div class="card"><div style="position:relative;height:720px;overflow:hidden" id="ladderBox"></div></div></div>
<div class="stab-c" id="sub-hbar"><div class="card" id="hbarBox"></div></div>
<div class="stab-c" id="sub-candle"><div class="card"><div class="candle-wrap"><canvas id="candleChart"></canvas></div></div></div>
</div>

<!-- TAB 4: LIQUIDATIONS -->
<div class="tab-page" id="page-liquidation">
<div class="g2"><div><div class="card"><div class="card-t">Liquidation Cascade</div><div style="font-size:10.5px;color:var(--dim);margin-bottom:12px">Levels marked "swept" had liquidity taken during Jan‚ÄìFeb selloff.</div><div id="cascadeBox"></div></div></div><div><div class="card"><div class="card-t">Magnetic Zones</div><div id="magnetBox"></div></div><div class="card"><div class="card-t">Data Sources</div><a class="src" href="https://www.coinglass.com/pro/futures/LiquidationMap" target="_blank">CoinGlass ‚Äî Liquidation Map</a><a class="src" href="https://www.coinglass.com/pro/futures/LiquidationHeatMap" target="_blank">CoinGlass ‚Äî Heatmap</a><a class="src" href="https://coinank.com/chart/derivatives/liq-map" target="_blank">CoinAnk ‚Äî Liquidation Map</a><a class="src" href="https://bitcoincounterflow.com/liquidation-heatmap/" target="_blank">Bitcoin CounterFlow</a><a class="src" href="https://coinalyze.net/bitcoin/liquidations/" target="_blank">Coinalyze</a><a class="src" href="https://coinmarketcap.com/charts/liquidations/" target="_blank">CoinMarketCap</a></div></div></div>
</div>

<!-- TAB 5: EXITS & RISK -->
<div class="tab-page" id="page-exits">
<div class="card"><div class="card-t" style="color:var(--gold)">Take Profit Levels</div><div style="font-size:11px;color:var(--dim);margin-bottom:12px">Scale-out strategy. Profits calculated from your filled entries.</div><div id="tpBox"></div></div>
<div class="card" style="padding:0;border:none;background:none"><div class="card-t" style="color:var(--red)">Stop Loss</div><div class="sl-card"><div style="display:flex;align-items:center;gap:7px;margin-bottom:7px"><span class="badge" style="background:var(--rs);color:var(--red);border:1px solid var(--rm)">WEEKLY CLOSE ONLY</span><span class="badge badge-hi">HIGH</span></div><div class="sl-price">$31,000</div><p style="color:var(--dim);font-size:12px;margin-top:8px;line-height:1.8;max-width:700px">Below <strong style="color:var(--text)">$31,777‚Äì$32,827</strong> support. Previous cycle base + ascending channel lower boundary. Heatmap shows <strong style="color:var(--text)">no liquidity below $42K</strong> ‚Äî below = structural breakdown, not a sweep.</p><div class="sl-metrics" id="slMetrics"></div></div></div>
<div class="card" style="margin-top:14px"><div class="card-t">Key Takeaways</div>
<div class="acard" style="border-left:3px solid var(--purple);margin-bottom:10px"><p><strong>Why this works:</strong> Scout at $66K ensures exposure if this is the bottom (RSI oversold only 3x in history). But 63% of capital reserved for $60K and below where Fib, horizontal support, and structure converge. Golden pocket at $55.5K gets largest allocation = highest confluence.</p></div>
<div class="acard" style="border-left:3px solid var(--green);margin-bottom:10px"><p><strong>Risk/Reward:</strong> Most likely scenario (‚ë†‚Äì‚ë¢): $3,850 deployed at avg ~$59,500. Recovery to ATH = +112%. Stop at $31K risks ~48% on deployed. <strong>2.3:1 R:R to ATH</strong> ‚Äî much better if new price discovery above $126K.</p></div>
<div class="acard" style="border-left:3px solid var(--cyan)"><p><strong>Execution:</strong> Spot exchange limit orders (not futures). Weekly close below $31K as stop ‚Äî not intraday wicks. Patience is the edge. Designed to work across weeks to months.</p></div>
</div>
</div>

<div class="disc">‚ö†Ô∏è Educational only. Not financial advice. Crypto is volatile. Liquidation data is a snapshot from Feb 11, 2026. DYOR.<br><strong>Sources:</strong> TradingView ¬∑ CoinGlass ¬∑ CoinGecko API ¬∑ CoinDesk ¬∑ Compass Point ¬∑ Phemex ¬∑ BitBo/BitcoinTreasuries</div>
</div>
<div class="toast" id="toast"></div>

<script>
const ENTRIES=[
  {id:1,name:"Scout",price:66000,pct:.12,rat:"200W EMA + 0.5 Fib + near MSTR avg ($66,384). Don't miss V-reversal.",conf:"high"},
  {id:2,name:"Confirm",price:60000,pct:.18,rat:"Feb 6 flash-crash low retest. $2.6B liquidated. Partially swept.",conf:"high"},
  {id:3,name:"Core",price:55500,pct:.25,rat:"0.618 Fib golden pocket (~$57.8K). Untouched liq $58K‚Äì$55K. MAX confluence.",conf:"high"},
  {id:4,name:"Deep",price:49500,pct:.20,rat:"2021 cycle ATH ($49K). 4x lev long liq cascade. Heatmap teal bands.",conf:"med"},
  {id:5,name:"Panic",price:45000,pct:.15,rat:"Rising trendline support. Near 0.786 Fib ($39.2K). Thin liquidity.",conf:"med"},
  {id:6,name:"Capitulation",price:42000,pct:.10,rat:"Last entry before heatmap dark. Channel base. Beyond = invalidation.",conf:"low"},
];
const T=7000,SL=31000;
const TPS=[
  {lv:"TP1",price:85000,sell:.20,reason:"100W EMA reclaim. First major resistance.",bar:.25},
  {lv:"TP2",price:100000,sell:.25,reason:"Psychological $100K + 0.236 Fib. Major supply.",bar:.45},
  {lv:"TP3",price:126000,sell:.30,reason:"ATH retest ($126,272). Massive resistance.",bar:.75},
  {lv:"TP4",price:155000,sell:.25,reason:"1.272 Fib extension. New price discovery.",bar:1},
];
const CASCADE=[
  {price:"$120K‚Äì$95K",color:"var(--green)",pct:85,status:"SWEPT",title:"Short Liq Zone (Above)",detail:"Swept Oct 2025 crash from ATH."},
  {price:"$95K‚Äì$80K",color:"var(--green)",pct:70,status:"SWEPT",title:"Long Liq ‚Äî Institutional",detail:"ETF holder avg $81.6K ‚Äî all underwater."},
  {price:"$80K‚Äì$68K",color:"var(--gold)",pct:90,status:"SWEPT",title:"Leverage Flush",detail:"$1B+ liquidated Feb 5. $70K key mechanical level."},
  {price:"$68K‚Äì$60K",color:"var(--orange)",pct:95,status:"PARTIAL",title:"Flash Crash ‚Äî MSTR Zone",detail:"$2.6B liq Feb 5-6. MSTR $66.4K. Partially drained."},
  {price:"$58K‚Äì$55K",color:"var(--red)",pct:60,status:"UNTOUCHED ‚ö°",title:"Golden Pocket ‚Äî Next Magnet",detail:"NOT touched. 200W MA $57.9K. Highest-confluence zone."},
  {price:"$50K‚Äì$45K",color:"var(--red)",pct:35,status:"UNTOUCHED",title:"2021 High + 4x Lev Liq",detail:"Teal bands, less dense. 4x lev liq math = ~$50K."},
  {price:"$45K‚Äì$40K",color:"var(--purple)",pct:15,status:"UNTOUCHED",title:"Thin Liq ‚Äî Structural",detail:"Heatmap dark below $42K. Channel base."},
  {price:"Below $37K",color:"var(--muted)",pct:5,status:"EMPTY",title:"No Significant Liq",detail:"Full cycle breakdown territory."},
];
const MAGNETS=[
  {price:"$87.8‚Äì93K",label:"Highest momentum supply",c:"var(--red)",e:"üî•"},
  {price:"$100K",label:"Psychological + short wall",c:"var(--red)",e:"üî•"},
  {price:"$63‚Äì66K",label:"Nearest long cluster (partial)",c:"var(--green)",e:"üî•"},
  {price:"$58K‚Äì$55K",label:"Golden pocket ‚Äî UNTOUCHED",c:"var(--gold)",e:"‚ö°"},
  {price:"$60K",label:"Flash crash floor",c:"var(--green)",e:"üî•"},
  {price:"$57.9K",label:"200W MA ‚Äî cycle floor",c:"var(--blue)",e:"‚ö°"},
  {price:"$66,384",label:"MSTR cost basis",c:"var(--purple)",e:"‚óà"},
];
let S={filled:[false,false,false,false,false,false],simPrice:66000,simManual:false};
const nums=['‚ë†','‚ë°','‚ë¢','‚ë£','‚ë§','‚ë•'];
function save(){try{localStorage.setItem('btc_dca_v3',JSON.stringify(S))}catch(e){}}
function load(){try{const d=JSON.parse(localStorage.getItem('btc_dca_v3'));if(d){S.filled=d.filled||S.filled;S.simPrice=d.simPrice||66000}}catch(e){}}
const $=id=>document.getElementById(id);
const fmt=n=>(n<0?'-':'')+'$'+Math.abs(Math.round(n)).toLocaleString();
const toast=m=>{const t=$('toast');t.textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2200)};
function gd(){let d=0,b=0;ENTRIES.forEach((e,i)=>{if(S.filled[i]){const a=Math.round(T*e.pct);d+=a;b+=a/e.price}});return{dep:d,rem:T-d,btc:b,avg:b>0?d/b:0}}

// LIVE PRICE
let liveP=null;
async function fetchPrice(){try{const r=await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd&include_24hr_change=true');const d=await r.json();liveP=d.bitcoin.usd;const c=d.bitcoin.usd_24h_change;$('livePrice').textContent='$'+liveP.toLocaleString();const e=$('liveChg');e.textContent=(c>=0?'+':'')+c.toFixed(2)+'% 24h';e.className='chg '+(c>=0?'up':'dn');$('priceStatus').textContent='Live via CoinGecko ¬∑ '+new Date().toLocaleTimeString();$('sh_price').textContent='$'+liveP.toLocaleString();$('liveDot').style.background='var(--green)';if(!S.simManual){S.simPrice=Math.round(liveP);$('simInput').value=S.simPrice;$('simSlider').value=Math.min(180000,Math.max(25000,S.simPrice))}updateAll()}catch(e){$('priceStatus').textContent='‚ö† Fetch failed ‚Äî retrying...';$('liveDot').style.background='var(--red)'}}
function startFeed(){fetchPrice();setInterval(fetchPrice,60000)}

function updateAll(){renderStats();renderET();renderSC();updatePnL();updateSH();renderSL();renderTP()}
function renderStats(){const d=gd(),p=S.simPrice,val=d.btc*p,pnl=val-d.dep,pp=d.dep>0?pnl/d.dep*100:0,fa=((p-126272)/126272*100);
$('overviewStats').innerHTML=[
{l:'BTC Price',v:'$'+(liveP||p).toLocaleString(),c:'var(--gold)',s:fa.toFixed(1)+'% from ATH',x:'sy'},
{l:'Deployed',v:fmt(d.dep),c:'var(--gold)',s:fmt(d.rem)+' remaining',x:'sy'},
{l:'BTC Accumulated',v:d.btc>0?d.btc.toFixed(5)+' BTC':'‚Äî',c:'var(--cyan)',s:d.avg>0?'Avg: '+fmt(d.avg):'No fills yet',x:'sc'},
{l:'Unrealized P&L',v:d.dep>0?((pnl>=0?'+':'')+fmt(pnl)):'‚Äî',c:pnl>=0?'var(--green)':'var(--red)',s:d.dep>0?(pp>=0?'+':'')+pp.toFixed(1)+'%':'‚Äî',x:pnl>=0?'sg':'sr'},
{l:'Position Value',v:d.dep>0?fmt(val):'‚Äî',c:'var(--blue)',s:d.dep>0?'on '+fmt(d.dep)+' deployed':'‚Äî',x:'sb'},
].map(s=>`<div class="stat ${s.x}"><div class="stat-lbl">${s.l}</div><div class="stat-val" style="color:${s.c}">${s.v}</div><div class="stat-sub">${s.s}</div></div>`).join('')}

function renderET(){const tb=document.querySelector('#entryTable tbody');tb.innerHTML='';ENTRIES.forEach((e,i)=>{const a=Math.round(T*e.pct),btc=(a/e.price).toFixed(5),cf=e.conf==='high'?'<span class="badge badge-hi">High</span>':e.conf==='med'?'<span class="badge badge-md">Med</span>':'<span class="badge badge-lo">Low</span>';const tr=document.createElement('tr');if(S.filled[i])tr.classList.add('filled');tr.innerHTML=`<td><button class="ck-btn ${S.filled[i]?'on':''}" onclick="tog(${i})">${S.filled[i]?'‚úì':''}</button></td><td><span style="font:700 12px var(--mono);color:var(--green)">${nums[i]} ${e.name}</span></td><td><span style="font:600 13px var(--mono)">$${e.price.toLocaleString()}</span></td><td><span style="font:600 11px var(--mono);color:var(--green)">${e.pct*100}%</span></td><td><span style="font:500 11px var(--mono)">$${a.toLocaleString()}</span></td><td><span style="font:500 11px var(--mono);color:var(--cyan)">${btc}</span></td><td><span style="font-size:10px;color:var(--dim);max-width:200px;display:block;line-height:1.4">${e.rat}</span></td><td>${cf}</td>`;tb.appendChild(tr)})}
function tog(i){S.filled[i]=!S.filled[i];save();updateAll();renderLadder();toast(S.filled[i]?nums[i]+' '+ENTRIES[i].name+' FILLED ‚úì':nums[i]+' '+ENTRIES[i].name+' unmarked')}

function renderSC(){const sc=[{tag:'MOST LIKELY (55%)',cls:'best',h:'Entries ‚ë†‚Äì‚ë¢',ids:[0,1,2],c:'var(--green)'},{tag:'MODERATE (30%)',cls:'mid',h:'Entries ‚ë†‚Äì‚ë£',ids:[0,1,2,3],c:'var(--gold)'},{tag:'BLACK SWAN (15%)',cls:'worst',h:'All 6 Fill',ids:[0,1,2,3,4,5],c:'var(--red)'}];
$('scenarios').innerHTML=sc.map(s=>{let d=0,b=0;s.ids.forEach(i=>{const a=Math.round(T*ENTRIES[i].pct);d+=a;b+=a/ENTRIES[i].price});const avg=d/b;return`<div class="sc ${s.cls}"><div class="sc-tag" style="color:${s.c}">${s.tag}</div><h4>${s.h}</h4><div class="val" style="color:${s.c}">$${Math.round(avg).toLocaleString()}</div><div class="det">$${d.toLocaleString()} of $7,000 ¬∑ ${b.toFixed(5)} BTC</div></div>`}).join('')}

function updatePnL(){const d=gd(),p=S.simPrice,g=$('pnlGrid');if(d.dep===0){g.innerHTML='<div class="pnl-m" style="grid-column:1/-1"><div class="l">No entries filled</div><div class="v" style="color:var(--muted)">Check entries to activate</div></div>';return}
const val=d.btc*p,pnl=val-d.dep,pp=pnl/d.dep*100,pc=pnl>=0?'var(--green)':'var(--red)',ds=((SL-d.avg)/d.avg*100),ls=d.btc*SL-d.dep;
g.innerHTML=`<div class="pnl-m"><div class="l">Deployed</div><div class="v" style="color:var(--gold)">$${d.dep.toLocaleString()}</div></div><div class="pnl-m"><div class="l">Remaining</div><div class="v" style="color:var(--cyan)">$${d.rem.toLocaleString()}</div></div><div class="pnl-m"><div class="l">BTC</div><div class="v" style="color:var(--cyan)">${d.btc.toFixed(5)}</div></div><div class="pnl-m"><div class="l">Avg Entry</div><div class="v">$${Math.round(d.avg).toLocaleString()}</div></div><div class="pnl-m"><div class="l">Value</div><div class="v" style="color:${pc}">$${Math.round(val).toLocaleString()}</div></div><div class="pnl-m"><div class="l">P&L $</div><div class="v" style="color:${pc}">${pnl>=0?'+':''}$${Math.round(pnl).toLocaleString()}</div></div><div class="pnl-m"><div class="l">P&L %</div><div class="v" style="color:${pc}">${pp>=0?'+':''}${pp.toFixed(1)}%</div></div><div class="pnl-m"><div class="l">To Stop</div><div class="v" style="color:var(--red)">${ds.toFixed(1)}%</div></div><div class="pnl-m"><div class="l">Loss @ Stop</div><div class="v" style="color:var(--red)">$${Math.round(Math.abs(ls)).toLocaleString()}</div></div>`}

function updateSH(){const d=gd(),p=S.simPrice;$('sh_dep').textContent='$'+d.dep.toLocaleString();$('sh_rem').textContent='$'+d.rem.toLocaleString();$('sh_avg').textContent=d.avg>0?'$'+Math.round(d.avg).toLocaleString():'‚Äî';if(d.dep>0){const pnl=d.btc*p-d.dep,pp=pnl/d.dep*100,el=$('sh_pnl');el.textContent=(pnl>=0?'+':'')+fmt(pnl)+' ('+(pp>=0?'+':'')+pp.toFixed(1)+'%)';el.className='sbar-v '+(pnl>=0?'green':'red')}else{$('sh_pnl').textContent='‚Äî';$('sh_pnl').className='sbar-v'}}
function renderSL(){const d=gd(),el=$('slMetrics');if(d.dep===0){el.innerHTML='<p style="color:var(--muted);font-size:11px;margin-top:8px">Fill entries to see impact.</p>';return}const dd=((SL-d.avg)/d.avg*100),l=d.btc*SL-d.dep,r=d.dep+l;el.innerHTML=`<div class="sl-m"><div class="v" style="color:var(--red)">${dd.toFixed(1)}%</div><div class="l">Drawdown</div></div><div class="sl-m"><div class="v" style="color:var(--red)">$${Math.round(Math.abs(l)).toLocaleString()}</div><div class="l">Max Loss</div></div><div class="sl-m"><div class="v" style="color:var(--muted)">$${Math.max(0,Math.round(r)).toLocaleString()}</div><div class="l">Remaining</div></div>`}
function renderTP(){const d=gd();if(d.dep===0){$('tpBox').innerHTML='<p style="color:var(--muted);font-size:12px">Fill entries to see profits.</p>';return}$('tpBox').innerHTML=TPS.map(tp=>{const g=d.btc*tp.price-d.dep,pp=g/d.dep*100;return`<div class="tp-row"><span class="tp-num">${tp.lv}</span><span class="tp-price">$${tp.price.toLocaleString()}</span><span class="tp-pct">${tp.sell*100}%</span><div class="tp-bar-w"><div class="tp-bar-f" style="width:${tp.bar*100}%"></div></div><span class="tp-gain">+$${Math.round(g*tp.sell).toLocaleString()} (${pp.toFixed(0)}%)</span><span class="tp-reason">${tp.reason}</span></div>`}).join('')}
function renderCascade(){$('cascadeBox').innerHTML=CASCADE.map(c=>{const sw=c.status.includes('SWEPT')||c.status==='PARTIAL';const sb=sw?(c.status==='SWEPT'?'var(--gs)':'var(--os)'):c.status==='EMPTY'?'rgba(255,255,255,.03)':'var(--rs)';const sc=sw?(c.status==='SWEPT'?'var(--green)':'var(--orange)'):c.status==='EMPTY'?'var(--muted)':'var(--red)';return`<div class="casc"><div class="casc-p" style="color:${c.color}">${c.price}</div><div class="casc-b"><div class="casc-bar" style="width:${c.pct}%;background:${c.color}"></div><div class="casc-info"><div class="t" style="color:${c.color}">${c.title}</div><div class="d">${c.detail}</div></div><div class="casc-st"><span class="badge" style="background:${sb};color:${sc};border:1px solid ${sc}33">${c.status}</span></div></div></div>`}).join('')}
function renderMagnets(){$('magnetBox').innerHTML=MAGNETS.map(z=>`<div class="kz"><div><div class="kz-p" style="color:${z.c}">${z.price}</div><div class="kz-l">${z.label}</div></div><span style="font-size:13px">${z.e}</span></div>`).join('')}
function renderLadder(){const box=$('ladderBox'),cp=liveP||S.simPrice,all=[];TPS.forEach(tp=>all.push({price:tp.price,type:'tp',label:tp.lv,note:tp.reason,color:'var(--gold)'}));all.push({price:92000,type:'liq',label:'Short Liq $6.5B',note:'Squeeze magnet',color:'var(--orange)'});all.push({price:cp,type:'current',label:'Current',note:new Date().toLocaleDateString(),color:'var(--cyan)'});all.push({price:66384,type:'mstr',label:'MSTR $66,384',note:'714,644 BTC',color:'var(--purple)'});ENTRIES.forEach((e,i)=>all.push({price:e.price,type:'entry',label:`${nums[i]} ${e.name} ${e.pct*100}%`,note:S.filled[i]?'‚úì FILLED':'Pending',color:'var(--green)',filled:S.filled[i]}));all.push({price:57000,type:'liq',label:'Liq Untouched ‚ö°',note:'$58K‚Äì$55K',color:'var(--orange)'});all.push({price:48000,type:'liq',label:'Liq Light',note:'$50K‚Äì$45K',color:'var(--orange)'});all.push({price:SL,type:'sl',label:'Stop Loss',note:'Weekly close',color:'var(--red)'});all.sort((a,b)=>b.price-a.price);const mx=160000,mn=28000,h=720;let html=`<div style="position:absolute;left:69px;top:0;bottom:0;width:3px;background:linear-gradient(180deg,var(--gold)20%,var(--green)40%,var(--cyan)55%,var(--blue)70%,var(--red)90%);opacity:.12;border-radius:2px"></div>`;all.forEach(lv=>{const y=Math.max(4,Math.min(h-28,((mx-lv.price)/(mx-mn))*h));const dc=lv.type==='entry'?'entry':lv.type==='current'?'current':lv.type==='tp'?'tp':lv.type==='sl'?'sl':lv.type==='mstr'?'mstr':'liq';const bg=lv.type==='entry'?'var(--gs)':lv.type==='tp'?'var(--yy)':lv.type==='sl'?'var(--rs)':lv.type==='current'?'var(--cs)':lv.type==='mstr'?'var(--ps)':'var(--os)';const fs=lv.filled?'background:var(--green);':'';html+=`<div class="lad-item" style="top:${y}px"><span class="lad-p" style="color:${lv.color}">${lv.price>=1000?'$'+Math.round(lv.price/1000)+'K':'$'+lv.price}</span><div class="lad-dot ${dc} ${lv.filled?'filled':''}" style="${fs}"></div><div class="lad-line" style="background:${lv.color}"></div><span class="lad-tag" style="background:${bg};color:${lv.color}">${lv.label}</span><span class="lad-note">${lv.note}</span></div>`});box.innerHTML=html}
function renderHBar(){const cp=liveP||S.simPrice;const levels=[{l:'TP4 $155K',p:155000,c:'var(--gold)'},{l:'TP3 $126K',p:126000,c:'var(--gold)'},{l:'TP2 $100K',p:100000,c:'var(--gold)'},{l:'Short Liq',p:92000,c:'var(--orange)'},{l:'TP1 $85K',p:85000,c:'var(--gold)'},{l:'Current',p:cp,c:'var(--cyan)'},{l:'MSTR',p:66384,c:'var(--purple)'},{l:'‚ë† $66K',p:66000,c:'var(--green)'},{l:'‚ë° $60K',p:60000,c:'var(--green)'},{l:'Liq ‚ö°',p:57000,c:'var(--orange)'},{l:'‚ë¢ $55.5K',p:55500,c:'var(--green)'},{l:'‚ë£ $49.5K',p:49500,c:'var(--green)'},{l:'Liq',p:48000,c:'var(--orange)'},{l:'‚ë§ $45K',p:45000,c:'var(--green)'},{l:'‚ë• $42K',p:42000,c:'var(--green)'},{l:'STOP',p:SL,c:'var(--red)'}];const mx=160000;$('hbarBox').innerHTML='<div class="hbar">'+levels.map(l=>`<div class="hbar-r"><span class="hbar-l">${l.l}</span><div class="hbar-t"><div class="hbar-f" style="width:${l.p/mx*100}%;background:${l.c}">$${l.p.toLocaleString()}</div></div></div>`).join('')+'</div>'}
function renderCandle(){const canvas=$('candleChart'),ctx=canvas.getContext('2d'),dpr=window.devicePixelRatio||1,rect=canvas.parentElement.getBoundingClientRect();canvas.width=rect.width*dpr;canvas.height=500*dpr;canvas.style.width=rect.width+'px';canvas.style.height='500px';ctx.scale(dpr,dpr);const W=rect.width,H=500;const candles=[[118000,126272,115000,124000],[124000,125000,112000,113000],[113000,116000,105000,108000],[108000,110000,98000,100000],[100000,104000,95000,97000],[97000,101000,93000,99000],[99000,100000,88000,90000],[90000,93000,85000,88000],[88000,92000,86000,91000],[91000,94000,88000,89000],[89000,91000,81000,83000],[83000,87000,80000,85000],[85000,92000,84000,90000],[90000,95000,87000,92000],[92000,93000,85000,87000],[87000,89000,78000,80000],[80000,82000,60008,68000],[68000,71000,64000,66000]];const pad={top:30,right:70,bottom:30,left:10},cW=W-pad.left-pad.right,cH=H-pad.top-pad.bottom,mn=25000,mx=165000,pY=p=>pad.top+(1-(p-mn)/(mx-mn))*cH,cndW=Math.min(28,cW/candles.length*.7),gap=cW/candles.length;ctx.fillStyle='#080a14';ctx.fillRect(0,0,W,H);[40000,60000,80000,100000,120000,140000,160000].forEach(p=>{const y=pY(p);ctx.strokeStyle='rgba(42,42,64,.5)';ctx.lineWidth=.5;ctx.beginPath();ctx.moveTo(pad.left,y);ctx.lineTo(W-pad.right,y);ctx.stroke();ctx.fillStyle='#666688';ctx.font='10px JetBrains Mono';ctx.textAlign='right';ctx.fillText('$'+(p/1000)+'K',W-8,y+4)});[[pY(67000),pY(65000),'rgba(0,220,130,.06)'],[pY(61000),pY(59000),'rgba(0,220,130,.06)'],[pY(57000),pY(54000),'rgba(0,220,130,.10)'],[pY(51000),pY(48000),'rgba(0,220,130,.05)'],[pY(46000),pY(44000),'rgba(0,220,130,.04)'],[pY(43000),pY(41000),'rgba(0,220,130,.03)'],[pY(59000),pY(55000),'rgba(255,145,0,.08)'],[pY(32000),pY(30000),'rgba(248,64,96,.10)']].forEach(z=>{ctx.fillStyle=z[2];ctx.fillRect(pad.left,z[0],cW,z[1]-z[0])});[[66000,'#00dc82',[4,4]],[60000,'#00dc82',[4,4]],[55500,'#00dc82',[2,2]],[49500,'#00dc8288',[4,4]],[45000,'#00dc8266',[4,4]],[42000,'#00dc8244',[4,4]],[66384,'#a07cf8',[6,3]],[85000,'#f0c840',[4,4]],[100000,'#f0c840',[4,4]],[126000,'#f0c840',[4,4]],[155000,'#f0c840',[4,4]],[31000,'#f84060',[6,3]]].forEach(l=>{const y=pY(l[0]);ctx.strokeStyle=l[1];ctx.lineWidth=1;ctx.setLineDash(l[2]);ctx.beginPath();ctx.moveTo(pad.left,y);ctx.lineTo(W-pad.right,y);ctx.stroke();ctx.setLineDash([])});ctx.font='9px JetBrains Mono';ctx.textAlign='left';[[66000,'‚ë† $66K','#00dc82'],[60000,'‚ë° $60K','#00dc82'],[55500,'‚ë¢ $55.5K','#00dc82'],[49500,'‚ë£ $49.5K','#00dc82'],[45000,'‚ë§ $45K','#00dc82'],[42000,'‚ë• $42K','#00dc82'],[66384,'MSTR','#a07cf8'],[85000,'TP1','#f0c840'],[100000,'TP2','#f0c840'],[126000,'TP3','#f0c840'],[155000,'TP4','#f0c840'],[31000,'STOP','#f84060']].forEach(l=>{ctx.fillStyle=l[2];ctx.fillText(l[1],W-pad.right+6,pY(l[0])+3)});candles.forEach((c,i)=>{const x=pad.left+i*gap+gap/2,[o,h,l,cl]=c,bull=cl>=o,col=bull?'#00dc82':'#f84060',bT=pY(Math.max(o,cl)),bB=pY(Math.min(o,cl)),bH=Math.max(2,bB-bT);ctx.strokeStyle=col;ctx.lineWidth=1.5;ctx.beginPath();ctx.moveTo(x,pY(h));ctx.lineTo(x,pY(l));ctx.stroke();ctx.globalAlpha=bull?.8:.9;ctx.fillStyle=col;ctx.fillRect(x-cndW/2,bT,cndW,bH);ctx.globalAlpha=1;ctx.strokeStyle=col;ctx.lineWidth=1;ctx.strokeRect(x-cndW/2,bT,cndW,bH)});const curY=pY(liveP||66000);ctx.fillStyle='#18ffff';ctx.beginPath();ctx.arc(pad.left+(candles.length-1)*gap+gap/2+cndW,curY,5,0,Math.PI*2);ctx.fill();ctx.font='bold 11px JetBrains Mono';ctx.textAlign='left';ctx.fillText('$'+(liveP||66000).toLocaleString(),pad.left+(candles.length-1)*gap+gap/2+cndW+10,curY+4)}

document.querySelectorAll('.tab-btn').forEach(btn=>{btn.addEventListener('click',()=>{document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('on'));document.querySelectorAll('.tab-page').forEach(p=>p.classList.remove('on'));btn.classList.add('on');$('page-'+btn.dataset.tab).classList.add('on');if(btn.dataset.tab==='pricemap'){renderLadder();renderHBar()}window.scrollTo({top:0,behavior:'smooth'})})});
function switchSub(tab){document.querySelectorAll('.stab').forEach(b=>b.classList.remove('on'));document.querySelectorAll('.stab-c').forEach(t=>t.classList.remove('on'));event.target.classList.add('on');$('sub-'+tab).classList.add('on');if(tab==='candle')setTimeout(renderCandle,50);if(tab==='ladder')renderLadder();if(tab==='hbar')renderHBar()}
const slider=$('simSlider'),simIn=$('simInput');
slider.addEventListener('input',()=>{S.simPrice=parseInt(slider.value);simIn.value=S.simPrice;S.simManual=true;save();updateAll()});
simIn.addEventListener('input',()=>{const v=parseInt(simIn.value.replace(/[^0-9]/g,''));if(!isNaN(v)&&v>0){S.simPrice=v;slider.value=Math.min(180000,Math.max(25000,v));S.simManual=true;save();updateAll()}});

load();$('simInput').value=S.simPrice;$('simSlider').value=Math.min(180000,Math.max(25000,S.simPrice));updateAll();renderCascade();renderMagnets();renderLadder();renderHBar();startFeed();window.addEventListener('resize',()=>{if($('sub-candle').classList.contains('on'))renderCandle()});
</script>
</body>
</html>
